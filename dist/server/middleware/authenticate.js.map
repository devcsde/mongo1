{"version":3,"sources":["../../../server/middleware/authenticate.js"],"names":["require","User","authenticate","req","res","next","token","header","findByToken","then","user","Promise","reject","catch","e","status","send","module","exports"],"mappings":";;AAAA;;;eAGaA,QAAQ,kBAAR,C;IAARC,I,YAAAA,I;;AAEL,IAAIC,eAAe,SAAfA,YAAe,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAmB;AAClC,QAAIC,QAAQH,IAAII,MAAJ,CAAW,QAAX,CAAZ;AACAN,SAAKO,WAAL,CAAiBF,KAAjB,EAAwBG,IAAxB,CAA6B,UAACC,IAAD,EAAU;AACnC,YAAI,CAACA,IAAL,EAAU;AACN,mBAAOC,QAAQC,MAAR,EAAP;AACH;AACDT,YAAIO,IAAJ,GAAWA,IAAX;AACAP,YAAIG,KAAJ,GAAYA,KAAZ;AACAD;AACH,KAPD,EAOGQ,KAPH,CAOS,UAACC,CAAD,EAAO;AACZV,YAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACH,KATD;AAUH,CAZD;;AAcAC,OAAOC,OAAP,GAAiB,EAAChB,0BAAD,EAAjB","file":"authenticate.js","sourcesContent":["/**\r\n * Created by csche on 24.07.2017.\r\n */\r\nlet {User} = require(\"./../models/user\");\r\n\r\nlet authenticate = (req, res, next)=> {\r\n    let token = req.header(\"x-auth\");\r\n    User.findByToken(token).then((user) => {\r\n        if (!user){\r\n            return Promise.reject();\r\n        }\r\n        req.user = user;\r\n        req.token = token;\r\n        next();\r\n    }).catch((e) => {\r\n        res.status(401).send();\r\n    });\r\n};\r\n\r\nmodule.exports = {authenticate};"]}